<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('partials/head') %>
</head>
<body>
  <%- include('partials/header') %>
  <main class="py-0">
    <!-- Hero Section -->
    <section class="position-relative overflow-hidden" style="min-height: 420px;">
      <div class="position-absolute top-0 start-0 w-100 h-100" style="background: linear-gradient(rgba(26,35,50,0.75), rgba(26,35,50,0.6)), url('https://upload.wikimedia.org/wikipedia/commons/thumb/2/2a/USS_Enterprise_%28CV-6%29_in_Puerto_Rico%2C_early_1941.jpg/1920px-USS_Enterprise_%28CV-6%29_in_Puerto_Rico%2C_early_1941.jpg') center/cover;"></div>
      <div class="position-relative container py-5 text-white text-center">
        <h1 class="display-3 fw-bold mb-3" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.5);">WW2 Naval History Archive</h1>
        <p class="lead fs-4 mb-0" style="max-width: 600px; margin: 0 auto;">Preserving the legacy of the greatest naval conflict in history</p>
      </div>
    </section>

    <div class="container py-5">
      <!-- Quick Stats -->
      <section class="mb-5">
        <div class="row g-3">
          <div class="col-6 col-md-3">
            <a href="/fleet" class="card text-decoration-none text-dark h-100">
              <div class="card-body text-center py-3">
                <span class="fs-4 fw-bold">50</span>
                <p class="small text-muted mb-0">Ships</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-3">
            <a href="/classes" class="card text-decoration-none text-dark h-100">
              <div class="card-body text-center py-3">
                <span class="fs-4 fw-bold">10</span>
                <p class="small text-muted mb-0">Classes</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-3">
            <a href="/captains" class="card text-decoration-none text-dark h-100">
              <div class="card-body text-center py-3">
                <span class="fs-4 fw-bold">25</span>
                <p class="small text-muted mb-0">Captains</p>
              </div>
            </a>
          </div>
          <div class="col-6 col-md-3">
            <a href="/timeline" class="card text-decoration-none text-dark h-100">
              <div class="card-body text-center py-3">
                <span class="fs-4 fw-bold">12</span>
                <p class="small text-muted mb-0">Key Events</p>
              </div>
            </a>
          </div>
        </div>
      </section>

      <!-- Featured Ship -->
      <section class="mb-5">
        <h2 class="mb-4">Featured Ship</h2>
        <div class="card">
          <div class="row g-0">
            <div class="col-md-4">
              <img src="<%= featuredShip.imageUrl %>" class="img-fluid rounded-start" alt="<%= featuredShip.name %>" style="object-fit: cover; height: 100%;">
            </div>
            <div class="col-md-8">
              <div class="card-body p-4">
                <h3 class="card-title"><%= featuredShip.name %></h3>
                <p class="text-muted mb-2">Commissioned <%= featuredShip.year %></p>
                <p class="card-text"><%= featuredShip.description %></p>
                <a href="/fleet" class="btn btn-outline-dark">Browse Full Fleet</a>
                <a href="/discover" class="btn btn-outline-secondary btn-sm ms-2" title="Discover a random ship">ðŸŽ² Discover a Ship</a>
                <button id="refreshData" class="btn btn-outline-secondary btn-sm ms-2" title="Fetch latest from Wikipedia">â†» Refresh from Wikipedia</button>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Museum News -->
      <section>
        <h2 class="mb-4">Museum News</h2>
        <div class="row g-4">
          <div class="col-md-4">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">New Exhibit: Pacific Theater</h5>
                <p class="card-text text-muted">Explore our expanded collection of artifacts from the Pacific campaigns, including personal effects from crew members of the USS Enterprise.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">Digital Restoration Project</h5>
                <p class="card-text text-muted">We are digitizing over 10,000 photographs from the Atlantic convoys. High-resolution images will be available in our Photo Gallery.</p>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card h-100">
              <div class="card-body">
                <h5 class="card-title">Live Battle Simulation</h5>
                <p class="card-text text-muted">Experience a real-time naval exercise in our Mission Control. Join fellow enthusiasts in our Live Battle room.</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>
  <%- include('partials/footer') %>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    document.getElementById('refreshData')?.addEventListener('click', function() {
      const btn = this;
      btn.disabled = true;
      btn.textContent = 'Fetching...';
      fetch('/admin/sync', { method: 'POST' })
        .then(r => r.json())
        .then(data => { btn.textContent = 'âœ“ Done'; setTimeout(() => { btn.disabled = false; btn.textContent = 'â†» Refresh from Wikipedia'; }, 2000); })
        .catch(() => { btn.textContent = 'Failed'; btn.disabled = false; });
    });
  </script>
</body>
</html>
